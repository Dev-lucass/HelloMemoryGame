<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Hello Memory</title>
    <style>
        :root {
            --p1: #ffb3bf;
            --p2: #ff5c86
        }

        * {
            box-sizing: border-box;
            margin: 0
        }

        html,
        body {
            height: 100%;
            font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
            background: linear-gradient(135deg, var(--p1), var(--p2));
            color: #111
        }

        .wrap {
            max-width: 960px;
            margin: 18px auto;
            padding: 14px
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center
        }

        h1 {
            font-size: 1.1rem;
            color: #fff
        }

        .stats {
            display: flex;
            gap: 8px;
            align-items: center
        }

        .stat {
            background: rgba(255, 255, 255, 0.12);
            padding: 6px 10px;
            border-radius: 10px;
            color: #fff;
            font-weight: 700
        }

        button {
            border: 0;
            padding: 8px 10px;
            border-radius: 10px;
            background: #fff;
            color: #ff2d6f;
            font-weight: 700;
            cursor: pointer
        }

        /* Grid */
        #board {
            display: grid;
            gap: 10px;
            margin-top: 14px;
            grid-template-columns: repeat(4, 1fr)
        }

        @media (max-width:420px) {
            #board {
                grid-template-columns: repeat(3, 1fr)
            }

            .wrap {
                padding: 10px
            }
        }

        @media (min-width:900px) {
            #board {
                grid-template-columns: repeat(6, 1fr)
            }
        }

        /* Card + flip fixes */
        .card {
            position: relative;
            padding-top: 100%;
            perspective: 1000px;
            cursor: pointer
        }

        .inner {
            position: absolute;
            inset: 0;
            border-radius: 12px;
            transition: transform .45s ease;
            transform-style: preserve-3d;
            -webkit-transform-style: preserve-3d;
            will-change: transform;
            z-index: 1
        }

        .card.flipped .inner {
            transform: rotateY(180deg);
            -webkit-transform: rotateY(180deg)
        }

        .face {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            border-radius: 12px;
            overflow: hidden
        }

        .face.back {
            background: #fff;
            color: #ff2d6f;
            font-weight: 800;
            z-index: 2
        }

        .face.front {
            transform: rotateY(180deg);
            -webkit-transform: rotateY(180deg);
            background: rgba(255, 255, 255, 0.95);
            z-index: 1
        }

        .face.front img {
            width: 86%;
            height: 86%;
            object-fit: contain
        }

        /* IMPORTANT: botÃ£o cobrindo a carta e acima do .inner para garantir clique */
        .card button.control {
            position: absolute;
            inset: 0;
            z-index: 4;
            /* acima do .inner */
            background: transparent;
            border: 0;
            all: unset;
            cursor: pointer;
        }

        /* matched spinning (force rotated state so spin shows face) */
        .matched .inner {
            animation: winSpin 1500ms linear infinite;
            transform: rotateY(180deg) !important;
            -webkit-transform: rotateY(180deg) !important
        }

        @keyframes winSpin {
            0% {
                transform: rotateY(180deg) rotateZ(0deg)
            }

            50% {
                transform: rotateY(180deg) rotateZ(180deg)
            }

            100% {
                transform: rotateY(180deg) rotateZ(360deg)
            }
        }

        .overlay {
            position: fixed;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
            opacity: 0;
            transition: opacity .25s
        }

        .overlay.visible {
            pointer-events: auto;
            opacity: 1
        }

        .msg {
            background: #fff;
            padding: 18px;
            border-radius: 12px;
            text-align: center;
            color: #ff2d6f
        }
    </style>
</head>

<body>
    <div class="wrap">
        <header>
            <h1>ðŸŽ€ Hello Memory</h1>
            <div class="stats">
                <div class="stat">Movimentos: <span id="moves">0</span></div>
                <div class="stat">Pares: <span id="remaining">6</span></div>
                <button id="restart">Reiniciar</button>
            </div>
        </header>
        <section id="board" aria-label="Tabuleiro da memÃ³ria"></section>
    </div>

    <div class="overlay" id="overlay" aria-hidden="true">
        <div class="msg" role="dialog" aria-modal="true">
            <h2>ParabÃ©ns ðŸŽ‰</h2>
            <p>VocÃª encontrou todos os pares!</p>
            <button id="overlayRestart">Reiniciar</button>
        </div>
    </div>

    <script>
        // imagens
        const IMAGES = ['img/hk1.png', 'img/hk2.png', 'img/hk3.png', 'img/hk4.jpg', 'img/hk5.jpg', 'img/hk6.jpg'];
        const board = document.getElementById('board');
        const movesEl = document.getElementById('moves');
        const remEl = document.getElementById('remaining');
        const restart = document.getElementById('restart');
        const overlay = document.getElementById('overlay');
        const overlayRestart = document.getElementById('overlayRestart');

        let deck = [], first = null, second = null, lock = false, moves = 0, remaining = IMAGES.length;

        function init() {
            deck = shuffle([...IMAGES, ...IMAGES]);
            board.innerHTML = '';
            moves = 0; remaining = IMAGES.length; updateStats();
            overlay.classList.remove('visible'); overlay.setAttribute('aria-hidden', 'true');

            deck.forEach((src, i) => {
                const card = document.createElement('div'); card.className = 'card'; card.dataset.img = src;
                const inner = document.createElement('div'); inner.className = 'inner';
                const back = document.createElement('div'); back.className = 'face back'; back.textContent = '?';
                const front = document.createElement('div'); front.className = 'face front';
                const img = document.createElement('img'); img.src = src; img.alt = 'Carta'; front.appendChild(img);

                inner.appendChild(back); inner.appendChild(front);
                card.appendChild(inner);

                // botÃ£o cobrindo a carta (garante clique mesmo em dispositivos mÃ³veis)
                const btn = document.createElement('button');
                btn.className = 'control';
                btn.setAttribute('aria-label', 'Virar carta');
                btn.addEventListener('click', (ev) => { ev.stopPropagation(); onClick(card); });
                btn.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); onClick(card); } });
                card.appendChild(btn);

                // fallback: clique no prÃ³prio .card tambÃ©m dispara (Ãºtil para debug)
                card.addEventListener('click', () => {
                    // console.log para vocÃª ver no DevTools que o clique chegou aqui
                    // Caso o botÃ£o nÃ£o esteja funcionando por algum motivo, o clique no card ainda vai acionar.
                    // Remova o listener se preferir sÃ³ o botÃ£o.
                    // console.log('card click (fallback)');
                    onClick(card);
                });

                board.appendChild(card);
            });
        }

        function onClick(card) {
            if (lock) return;
            if (card.classList.contains('flipped') || card.classList.contains('matched')) return;

            card.classList.add('flipped');

            if (!first) { first = card; return; }
            second = card; lock = true; moves++; updateStats();

            if (first.dataset.img === second.dataset.img) {
                setTimeout(() => {
                    first.classList.add('matched');
                    second.classList.add('matched');
                    first = null; second = null; lock = false; remaining--; updateStats();
                    if (remaining === 0) win();
                }, 350);
            } else {
                setTimeout(() => {
                    first.classList.remove('flipped');
                    second.classList.remove('flipped');
                    first = null; second = null; lock = false;
                }, 600);
            }
        }

        function updateStats() { movesEl.textContent = moves; remEl.textContent = remaining; }
        function win() { overlay.classList.add('visible'); overlay.setAttribute('aria-hidden', 'false'); }
        function shuffle(a) { for (let i = a.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1));[a[i], a[j]] = [a[j], a[i]] } return a }
        restart.addEventListener('click', init); overlayRestart.addEventListener('click', init);
        document.addEventListener('keydown', e => { if (e.key.toLowerCase() === 'r') init(); });

        init();
    </script>
</body>

</html>