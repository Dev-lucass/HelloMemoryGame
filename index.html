<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="img/iconKitty.png" type="image/x-icon">
    <title>Hello Memory</title>
    <style>
        :root {
            --card-size: 120px;
            --gap: 12px;
        }

        * {
            box-sizing: border-box;
            font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* ======== CLIQUE EM QUALQUER PARTE DO CARD ======== */
        .card,
        .card * {
            pointer-events: none;
        }

        .card {
            pointer-events: auto;
            cursor: pointer;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            display: flex;
            min-height: 100vh;
            align-items: center;
            justify-content: center;
            padding: 24px;
            background: linear-gradient(135deg, #fff0f6 0%, #fef7ff 100%);
            user-select: none;
        }

        .container {
            width: 100%;
            max-width: 920px;
        }

        header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 18px;
        }

        h1 {
            margin: 0;
            font-size: 28px;
            color: #cc3768;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .stats {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .stat {
            background: #fff;
            padding: 8px 12px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, .06);
            font-weight: 600;
        }

        button#restart {
            background: #ff6fb5;
            color: white;
            border: 0;
            padding: 8px 14px;
            border-radius: 10px;
            font-weight: 700;
            cursor: pointer;
        }

        .board {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(var(--card-size), 1fr));
            gap: var(--gap);
            justify-items: center;
        }

        .card {
            width: var(--card-size);
            height: var(--card-size);
            perspective: 1000px;
            display: inline-block;
        }

        .inner {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform .6s ease;
        }

        .card.flipped .inner {
            transform: rotateY(180deg);
        }

        .face {
            position: absolute;
            inset: 0;
            border-radius: 12px;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            box-shadow: 0 6px 18px rgba(17, 12, 50, .06);
        }

        .front {
            background: #fff;
            border: 4px dashed rgba(204, 55, 104, .08);
            transform: rotateY(180deg);
        }

        .back {
            background: linear-gradient(180deg, #ffdfee, #fff);
        }

        .back::after {
            content: '';
            width: 60%;
            height: 60%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 24 24" fill="none" stroke="%23cc3768" stroke-width="1"><path d="M12 2v6M5 6v6M19 6v6M5 18h14" stroke-linecap="round" stroke-linejoin="round"/></svg>') center/contain no-repeat;
            opacity: .12;
        }

        .front img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .card.matched .inner {
            transform: rotateY(180deg) scale(1.02);
            transition: transform .4s cubic-bezier(.2, .9, .2, 1);
        }

        .card.matched {
            filter: drop-shadow(0 10px 20px rgba(204, 55, 104, .12));
        }

        .board.winner .card {
            animation: spin 1.6s linear infinite;
        }

        @keyframes spin {
            from {
                transform: rotateY(0) rotate(0);
            }

            to {
                transform: rotateY(360deg) rotate(360deg);
            }
        }

        .overlay {
            position: fixed;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }

        .msg {
            pointer-events: auto;
            background: linear-gradient(90deg, #ffd8ea, #ffb3e0);
            padding: 28px 36px;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(204, 55, 104, .16);
            text-align: center;
            transform: translateY(20px);
            opacity: 0;
            transition: all .4s;
        }

        .overlay.show .msg {
            transform: translateY(0);
            opacity: 1;
        }

        .msg h2 {
            margin: 0 0 8px 0;
            font-size: 28px;
            color: #6b0530;
        }

        .msg p {
            margin: 0 0 16px 0;
            color: #5a1033;
        }

        @media (min-width:800px) {
            :root {
                --card-size: 120px;
            }

            .board {
                grid-template-columns: repeat(6, var(--card-size));
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>ðŸŽ€ Hello Memory</h1>
            <div class="stats">
                <div class="stat">Movimentos: <span id="moves">0</span></div>
                <div class="stat">Pares restantes: <span id="remaining">6</span></div>
                <button id="restart">Reiniciar</button>
            </div>
        </header>

        <main>
            <section id="board" class="board" aria-live="polite" aria-label="Tabuleiro da memÃ³ria"></section>
        </main>
    </div>

    <div class="overlay" id="overlay" aria-hidden="true">
        <div class="msg" role="dialog" aria-modal="true">
            <h2>ParabÃ©ns ðŸŽ‰</h2>
            <p>VocÃª encontrou todos os pares!</p>
            <button id="overlayRestart">Reiniciar</button>
        </div>
    </div>

    <script>
        const IMAGES = [
            'img/hk1.png', 'img/hk2.png', 'img/hk3.png', 'img/hk4.jpg', 'img/hk5.jpg', 'img/hk6.jpg'
        ];

        const board = document.getElementById('board');
        const movesEl = document.getElementById('moves');
        const remainingEl = document.getElementById('remaining');
        const restartBtn = document.getElementById('restart');
        const overlay = document.getElementById('overlay');
        const overlayRestart = document.getElementById('overlayRestart');

        let firstCard = null;
        let secondCard = null;
        let lock = false;
        let moves = 0;
        let remaining = IMAGES.length;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function buildDeck() {
            const pairIds = IMAGES.map((src, i) => ({ id: i, src }));
            const deck = [...pairIds, ...pairIds].map((p, idx) => ({ ...p, uid: idx + 1 }));
            return shuffle(deck);
        }

        function render() {
            board.innerHTML = '';
            const deck = buildDeck();
            deck.forEach(card => {
                const el = document.createElement('div');
                el.className = 'card';
                el.dataset.id = card.id;
                el.dataset.uid = card.uid;
                el.innerHTML = `
      <div class="inner">
        <div class="face back"></div>
        <div class="face front"><img src="${card.src}" alt="Hello Kitty card" loading="lazy"></div>
      </div>`;
                el.addEventListener('pointerdown', onCardClick);
                board.appendChild(el);
            });
            moves = 0; remaining = IMAGES.length;
            updateCounters();
            board.classList.remove('winner');
            overlay.classList.remove('show');
            overlay.setAttribute('aria-hidden', 'true');
            firstCard = null;
            secondCard = null;
            lock = false;
        }

        function updateCounters() {
            movesEl.textContent = moves;
            remainingEl.textContent = remaining;
        }

        function onCardClick(e) {
            const card = e.currentTarget;
            e.preventDefault();
            if (lock) return;
            if (card.classList.contains('matched') || card.classList.contains('flipped')) return;
            if (firstCard && card === firstCard) return;

            card.classList.add('flipped');

            if (!firstCard) {
                firstCard = card;
                return;
            }

            secondCard = card;
            lock = true;
            moves++;
            updateCounters();

            const id1 = firstCard.dataset.id;
            const id2 = secondCard.dataset.id;

            if (id1 === id2) {
                setTimeout(() => {
                    firstCard.classList.add('matched');
                    secondCard.classList.add('matched');
                    firstCard = null;
                    secondCard = null;
                    lock = false;
                    remaining--;
                    updateCounters();
                    if (remaining === 0) onWin();
                }, 300);
            } else {
                setTimeout(() => {
                    if (firstCard) firstCard.classList.remove('flipped');
                    if (secondCard) secondCard.classList.remove('flipped');
                    firstCard = null;
                    secondCard = null;
                    lock = false;
                }, 800);
            }
        }

        function onWin() {
            board.classList.add('winner');
            overlay.classList.add('show');
            overlay.setAttribute('aria-hidden', 'false');
        }

        restartBtn.addEventListener('click', render);
        overlayRestart.addEventListener('click', render);

        render();
    </script>
</body>

</html>
